{"remainingRequest":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\codes\\dy-vue\\src\\components\\Myself.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\src\\components\\Myself.vue","mtime":1557580991419},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data(){\r\n        return{\r\n            tCode: false,\r\n            loginCode: false,       //登录控制\r\n            navCode: true,      //navbar控制\r\n            uname:'',       //input\r\n            upwd:'',       //input\r\n            code:1,      //页面实际监控session-控制\r\n            num:0,\r\n            user:{},\r\n            count:0,\r\n            list:[],\r\n            tostStyle:{\r\n                //加载提示\r\n                height: document.documentElement.clientHeight+'px'\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.setTime();\r\n    },\r\n    updated(){\r\n        this.loadDetail();\r\n    },\r\n   watch:{\r\n       //实时监听登录状态\r\n       code(){\r\n            var s = sessionStorage.getItem('uid');\r\n            if(!s){\r\n                this.loginCode = false;\r\n            }else{\r\n                this.loginCode = true;\r\n            }\r\n       }\r\n   },\r\n    methods:{\r\n        //请求个人详情\r\n        loadDetail(){\r\n            if(this.loginCode){\r\n                this.num+=1;\r\n                if(this.num<2){\r\n                    var url = this.host+'user/details';\r\n                    this.axios.get(url,{\r\n                        params:{\r\n                            uid:sessionStorage.getItem('uid')\r\n                        }\r\n                    }).then(res=>{\r\n                        var user = res.data.user;\r\n                        sessionStorage.setItem('user_name',user.user_name);\r\n                        sessionStorage.setItem('user_img',user.user_img);\r\n                        this.user = res.data.user;\r\n                        this.count = res.data.count;\r\n                        this.list = res.data.data;\r\n                        this.tCode = false;\r\n                    })\r\n\r\n                }\r\n\r\n            }\r\n        },\r\n        //监听登录状态控制\r\n        setTime(){\r\n            setInterval(() => {\r\n                if(this.code < 0){\r\n                    this.code++;\r\n                }else{\r\n                    this.code--;\r\n                }\r\n            }, 1);\r\n        },\r\n        //注销登录\r\n        removeLogin(){\r\n            history.go(0)\r\n            sessionStorage.removeItem('uid');\r\n            sessionStorage.removeItem('user_name');\r\n            sessionStorage.removeItem('user_img');\r\n            var url = this.host+'user/logout';\r\n            this.axios.get(url,{\r\n                params:{}\r\n            }).then((res)=>{\r\n                console.log(res);\r\n            })\r\n        },\r\n        //登录\r\n        loadLogin(){\r\n            this.tCode = true;\r\n            //var nreg = /^\\d{3,8}$/\r\n            // if(!nreg.test(this.uname)){\r\n            //     this.$toast('用户名格式不正确');\r\n            //     return;\r\n            // }\r\n            var preg = /^\\d{3,8}$/\r\n            if(!preg.test(this.upwd)){\r\n                this.$toast('密码格式不正确')\r\n                return;\r\n            }\r\n            var url = this.host+'user/login';\r\n            this.axios.get(url,{\r\n                params:{\r\n                    uname:this.uname,\r\n                    upwd:this.upwd\r\n                }\r\n            }).then(res=>{\r\n                var code = res.data.code;\r\n                if(code!=-1){\r\n                    this.$toast('登录成功');\r\n                    var $uid = res.data.data[0].uid;\r\n                    sessionStorage.setItem('uid',$uid);\r\n                }else{\r\n                    this.$toast('用户名与密码不匹配');\r\n                }\r\n            })\r\n        },\r\n        //登录状态控制\r\n        showWorks(){\r\n            this.navCode = true;\r\n        },\r\n        showKeep(){\r\n            this.navCode = false;\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["Myself.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Myself.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n    <div class=\"app-myself\">\r\n        <div class=\"login-hide\" v-if=\"!loginCode\">\r\n            <header id=\"header\" class=\"mui-bar mui-bar-transparent\">\r\n                <h1 class=\"mui-title\">用户登录</h1>\r\n            </header>\r\n            <form action=\"#\">\r\n                <input type=\"text\" class=\"uname inputs\" placeholder=\"请输入用户名\" v-model=\"uname\">\r\n                <input type=\"password\" class=\"upwd inputs\" placeholder=\"请输入登录密码\" v-model=\"upwd\">\r\n                <input type=\"button\" value=\"登录\" @click=\"loadLogin\" class=\"login-btn\">\r\n            </form>\r\n        </div>\r\n        <!-- 加载提示 -->\r\n        <div class=\"Toast\" v-if=\"tCode\" :style=\"tostStyle\">\r\n            <div class=\"toast-box\">\r\n                <span class=\"mui-spinner\"></span>\r\n                <p>正在加载中..</p>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"loginCode\" class=\"login-show\">\r\n            <div class=\"bg-box\">\r\n                <img src=\"../img/1.jpg\" alt=\"\" class=\"bg-img\">\r\n            </div>\r\n            <div class=\"my-details\">\r\n                <div class=\"img-box\">\r\n                    <img :src=\"user.user_img\" alt=\"\" class=\"my-img\">\r\n                    <div class=\"btn-box\">\r\n                        <a href=\"javascript:;\">\r\n                            <span class=\"lbtn\" @click=\"removeLogin\">注销</span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <!-- 用户信息 -->\r\n                <div class=\"details-user\">\r\n                    <h4 class=\"user-name\" v-text=\"user.user_name\"></h4>\r\n                    <p class=\"user-title\">当悦号：{{user.phone}}</p>\r\n                </div>\r\n                <div class=\"icon-box\">\r\n                    <p v-text=\"user.signature\">这个人很懒什么都没留下</p>\r\n                    <span class=\"icon-item\">西安</span>\r\n                    <span class=\"icon-item\">小哥哥</span>\r\n                    <span class=\"icon-item\">喜欢女,爱好女</span>\r\n                </div>\r\n                <div class=\"group\">\r\n                    <span class=\"group-item\"><strong v-text=\"count\">0</strong>获赞</span>\r\n                    <span class=\"group-item\"><strong>7</strong>关注</span>\r\n                    <span class=\"group-item\"><strong>4</strong>粉丝</span>\r\n                </div>\r\n                <ul class=\"list-navbar\">\r\n                    <li class=\"list-item\" :class=\"navCode==true ? 'active': ' ' \" @click=\"showWorks\">\r\n                        <span class=\"item-child\">我的作品</span>\r\n                    </li>\r\n                    <li class=\"list-item\" :class=\"navCode==false ? 'active': ' ' \" @click=\"showKeep\">\r\n                        <span class=\"item-child\">我的收藏</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"list-content\">\r\n                <div class=\"list-works\" v-show=\"navCode\">\r\n                    <div class=\"works-list\">\r\n                        <!-- 作品类表 -->\r\n                        <div class=\"works-item\" v-for=\"item of list\">\r\n                            <router-link to=\"\" class=\"works-link\">\r\n                                <video :src=\"item.src\" class=\"link-icon\">\r\n                                </video>\r\n                            </router-link>\r\n                            <div class=\"works-icon\">\r\n                                <span class=\"mui-icon-extra mui-icon-extra-heart-filled\"></span>\r\n                                <span>{{item.like_num}}赞</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"list-keep\" v-show=\"!navCode\">\r\n                    text2\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            tCode: false,\r\n            loginCode: false,       //登录控制\r\n            navCode: true,      //navbar控制\r\n            uname:'',       //input\r\n            upwd:'',       //input\r\n            code:1,      //页面实际监控session-控制\r\n            num:0,\r\n            user:{},\r\n            count:0,\r\n            list:[],\r\n            tostStyle:{\r\n                //加载提示\r\n                height: document.documentElement.clientHeight+'px'\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.setTime();\r\n    },\r\n    updated(){\r\n        this.loadDetail();\r\n    },\r\n   watch:{\r\n       //实时监听登录状态\r\n       code(){\r\n            var s = sessionStorage.getItem('uid');\r\n            if(!s){\r\n                this.loginCode = false;\r\n            }else{\r\n                this.loginCode = true;\r\n            }\r\n       }\r\n   },\r\n    methods:{\r\n        //请求个人详情\r\n        loadDetail(){\r\n            if(this.loginCode){\r\n                this.num+=1;\r\n                if(this.num<2){\r\n                    var url = this.host+'user/details';\r\n                    this.axios.get(url,{\r\n                        params:{\r\n                            uid:sessionStorage.getItem('uid')\r\n                        }\r\n                    }).then(res=>{\r\n                        var user = res.data.user;\r\n                        sessionStorage.setItem('user_name',user.user_name);\r\n                        sessionStorage.setItem('user_img',user.user_img);\r\n                        this.user = res.data.user;\r\n                        this.count = res.data.count;\r\n                        this.list = res.data.data;\r\n                        this.tCode = false;\r\n                    })\r\n\r\n                }\r\n\r\n            }\r\n        },\r\n        //监听登录状态控制\r\n        setTime(){\r\n            setInterval(() => {\r\n                if(this.code < 0){\r\n                    this.code++;\r\n                }else{\r\n                    this.code--;\r\n                }\r\n            }, 1);\r\n        },\r\n        //注销登录\r\n        removeLogin(){\r\n            history.go(0)\r\n            sessionStorage.removeItem('uid');\r\n            sessionStorage.removeItem('user_name');\r\n            sessionStorage.removeItem('user_img');\r\n            var url = this.host+'user/logout';\r\n            this.axios.get(url,{\r\n                params:{}\r\n            }).then((res)=>{\r\n                console.log(res);\r\n            })\r\n        },\r\n        //登录\r\n        loadLogin(){\r\n            this.tCode = true;\r\n            //var nreg = /^\\d{3,8}$/\r\n            // if(!nreg.test(this.uname)){\r\n            //     this.$toast('用户名格式不正确');\r\n            //     return;\r\n            // }\r\n            var preg = /^\\d{3,8}$/\r\n            if(!preg.test(this.upwd)){\r\n                this.$toast('密码格式不正确')\r\n                return;\r\n            }\r\n            var url = this.host+'user/login';\r\n            this.axios.get(url,{\r\n                params:{\r\n                    uname:this.uname,\r\n                    upwd:this.upwd\r\n                }\r\n            }).then(res=>{\r\n                var code = res.data.code;\r\n                if(code!=-1){\r\n                    this.$toast('登录成功');\r\n                    var $uid = res.data.data[0].uid;\r\n                    sessionStorage.setItem('uid',$uid);\r\n                }else{\r\n                    this.$toast('用户名与密码不匹配');\r\n                }\r\n            })\r\n        },\r\n        //登录状态控制\r\n        showWorks(){\r\n            this.navCode = true;\r\n        },\r\n        showKeep(){\r\n            this.navCode = false;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n/* 提示样式 */\r\n.app-myself .Toast{\r\n    width: 100%;\r\n    text-align: center;\r\n    background-image: linear-gradient(91deg, rgb(2, 0, 49) 0px, rgb(109, 51, 83) 140%);\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    display: flex;\r\n    position: fixed;\r\n    top: 0;\r\n}\r\n.app-myself .toast-box{\r\n    padding-top: 1rem;\r\n    margin: 0 auto;\r\n    width: 10rem;\r\n    background: rgba(0, 0, 0, .5);\r\n    border-radius: .5rem;\r\n    display: inline-block;\r\n}\r\n/* 主样式 */\r\n.app-myself .login-hide{\r\n    padding: 10rem 1rem;\r\n    text-align: center;\r\n}\r\n.app-myself .login-hide h1{\r\n    color: #fff;\r\n}\r\n.app-myself .inputs,.app-myself .login-btn{\r\n    background: rgba(0, 0, 0, .4);\r\n    border: 0;\r\n    border-radius: .5rem;\r\n}\r\n.app-myself .login-btn{\r\n    color: #fff;\r\n    padding: .6rem 3rem;\r\n}\r\n.app-myself .bg-box{\r\n    width: 100%;\r\n    height: 12rem;\r\n    border-bottom: .1rem solid rgba(0, 0, 0, .5);\r\n}\r\n.app-myself .bg-box .bg-img{\r\n    width: 100%;\r\n    height:100%;\r\n}\r\n.app-myself .my-details{\r\n    background: rgba(0, 0, 0, .5);\r\n    padding: 0rem 1rem;\r\n    padding-top: 6rem;\r\n    position: relative;\r\n}\r\n.app-myself .my-details .img-box{\r\n    width: 100%;\r\n    height: 7rem;\r\n    position: absolute;\r\n    top: -1.5rem;\r\n}\r\n.app-myself .my-details .my-img{\r\n    width: 7rem;\r\n    height: 100%;\r\n    border: .2rem solid rgba(0, 0, 0, .5);\r\n    border-radius: 50%;\r\n}\r\n.app-myself .my-details .btn-box{\r\n    display: inline-block;\r\n    position: absolute;\r\n    top: 3rem;\r\n    right: 2rem;\r\n}\r\n.app-myself .my-details .lbtn{\r\n    font-size: 17px;\r\n    color: #fff;\r\n    background: rgba(102,102,102,.5);\r\n    border-radius: .2rem;\r\n    padding: .3rem .7rem;\r\n}\r\n.app-myself .my-details .details-user{\r\n    border-bottom: .05rem solid rgba(102,102,102,.5);\r\n    margin-bottom: .5rem;\r\n}\r\n.app-myself .my-details .user-name{\r\n    color: #fff;\r\n    margin: .5rem 0;\r\n}\r\n.app-myself .my-details .user-title{\r\n    font-size: 10px;\r\n    color: #fff;\r\n}\r\n.app-myself .my-details .icon-box .icon-item{\r\n    font-size: 10px;\r\n    margin: 0 .2rem;\r\n    padding: .3rem .5rem;\r\n    border-radius: .2rem;\r\n    background: rgba(102,102,102,.5);\r\n}\r\n.app-myself .my-details .group{\r\n    margin: 1rem 0;\r\n}\r\n.app-myself .my-details .group-item{\r\n    margin: .5rem;\r\n    color: #fff;\r\n    font-size: 16px;\r\n}\r\n.app-myself .list-navbar{\r\n    padding: 0;\r\n    margin-bottom: 0;\r\n    list-style: none;\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n.app-myself .list-item{\r\n    padding: .5rem;\r\n}\r\n.app-myself .list-item.active{\r\n    color: #fff;\r\n    border-bottom: 1px solid #ffc107;\r\n}\r\n.app-myself .list-content{\r\n    margin-top: .1rem;\r\n}\r\n.app-myself  .list-content .works-list{\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-around;\r\n}\r\n.list-content .works-list .works-item{\r\n    width: 49.5%;\r\n    height: 12rem;\r\n    background: #000;\r\n    margin-bottom: .1rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: relative;\r\n}\r\n.list-content .works-list .works-link,.list-content .works-list .works-link .link-icon{\r\n    width: 100%;\r\n    display: block;\r\n}\r\n.list-content .works-list .works-icon{\r\n    color: #fff;\r\n    font-size: 16px;\r\n    position: absolute;\r\n    left: .5rem;\r\n    bottom: .5rem;\r\n}\r\n</style>\r\n"]}]}