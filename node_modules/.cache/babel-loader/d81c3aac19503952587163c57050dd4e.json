{"remainingRequest":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\codes\\dy-vue\\src\\views\\Chatroom.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\src\\views\\Chatroom.vue","mtime":1557544865029},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\codes\\dy-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      msg: '',\n      msgArr: [],\n      socket: null,\n      arr: '',\n      user_name: sessionStorage.getItem('user_name'),\n      user_img: sessionStorage.getItem('user_img')\n    };\n  },\n  created: function created() {\n    this.acceptData();\n  },\n  updated: function updated() {\n    var ele = document.querySelector('.chat-body');\n    ele.scrollTop = ele.scrollHeight;\n  },\n  methods: {\n    chatColse: function chatColse() {\n      this.socket.close();\n    },\n    sendData: function sendData() {\n      var msg = this.msg + \",\" + this.user_name + ',' + this.user_img;\n      this.socket.send(msg);\n      this.msg = \"\";\n    },\n    acceptData: function acceptData() {\n      var _this = this;\n\n      //接受数据\n      var str = '';\n      this.socket = new WebSocket(\"\".concat(this.ws));\n\n      this.socket.onmessage = function (e) {\n        _this.obj = JSON.parse(e.data); //获取服务器发来的数据,并且转换为对象\n\n        _this.msgArr.push(_this.obj); //将单条记录的对象push进数组\n\n      };\n    }\n  }\n};",{"version":3,"sources":["Chatroom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,IAHA;AAIA,MAAA,GAAA,EAAA,EAJA;AAKA,MAAA,SAAA,EAAA,cAAA,CAAA,OAAA,CAAA,WAAA,CALA;AAMA,MAAA,QAAA,EAAA,cAAA,CAAA,OAAA,CAAA,UAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAXA,qBAWA;AACA,SAAA,UAAA;AACA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,QAAA,GAAA,GAAA,QAAA,CAAA,aAAA,CAAA,YAAA,CAAA;AACA,IAAA,GAAA,CAAA,SAAA,GAAA,GAAA,CAAA,YAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,WAAA,MAAA,CAAA,KAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AACA,UAAA,GAAA,GAAA,KAAA,GAAA,GAAA,GAAA,GAAA,KAAA,SAAA,GAAA,GAAA,GAAA,KAAA,QAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA,WAAA,GAAA,GAAA,EAAA;AACA,KARA;AASA,IAAA,UATA,wBASA;AAAA;;AAAA;AACA,UAAA,GAAA,GAAA,EAAA;AACA,WAAA,MAAA,GAAA,IAAA,SAAA,WAAA,KAAA,EAAA,EAAA;;AACA,WAAA,MAAA,CAAA,SAAA,GAAA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,GAAA,GAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CADA,CACA;;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,GAAA,EAFA,CAEA;;AACA,OAHA;AAIA;AAhBA;AAlBA,CAAA","sourcesContent":["<template lang=\"html\">\r\n    <div class=\"app-chatroom\">\r\n        <header id=\"header\" class=\"mui-bar mui-bar-transparent\">\r\n            <a class=\"mui-action-back mui-icon mui-icon-left-nav mui-pull-left\" @click=\"chatColse\"></a>\r\n            <h1 class=\"mui-title\">聊天室</h1>\r\n        </header>\r\n        <div class=\"chat-body\">\r\n            <div class=\"chat-box\" v-for=\"(item,i) of msgArr\">\r\n                <ul class=\"chat-user\">\r\n                    <li class=\"user-img-box\" :class=\"item.user_img==user_img? 'right' : 'left' \">\r\n                        <img :src=\"item.user_img\" alt=\"\" class=\"user-img\">\r\n                    </li>\r\n                    <li class=\"user-name\" :class=\"item.user_img==user_img? 'right' : 'left' \">\r\n                        <h4 v-text=\"item.user_name\">用户名</h4>\r\n                    </li>\r\n                </ul>\r\n                <div class=\"chat-content\">\r\n                    <div class=\"content-msg\" v-text=\"item.msg\">吃饭、睡觉打豆豆瘦瘦高高规划设计开会时国际化是对方可根据</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"send-box\">\r\n            <ul class=\"send-parent\">\r\n                <li class=\"input-box\">\r\n                    <input type=\"text\" name=\"\" value=\"\" class=\"send-input\" v-model=\"msg\">\r\n                </li>\r\n                <li class=\"btn-box\">\r\n                    <span class=\"send-btn\" @click=\"sendData\">发送</span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default{\r\n    data(){\r\n        return{\r\n            msg:'',\r\n            msgArr:[],\r\n            socket:null,\r\n            arr:'',\r\n            user_name:sessionStorage.getItem('user_name'),\r\n            user_img:sessionStorage.getItem('user_img')\r\n        }\r\n    },\r\n    created(){\r\n        this.acceptData()\r\n    },\r\n    updated(){\r\n        var ele = document.querySelector('.chat-body')\r\n        ele.scrollTop = ele.scrollHeight\r\n    },\r\n    methods:{\r\n        chatColse(){\r\n            this.socket.close();\r\n        },\r\n        sendData(){\r\n            var msg = this.msg+\",\"+this.user_name+','+this.user_img;\r\n            this.socket.send(msg);\r\n            this.msg=\"\";\r\n        },\r\n        acceptData(){  //接受数据\r\n            var str='';\r\n            this.socket = new WebSocket(`${this.ws}`);\r\n            this.socket.onmessage = (e)=>{\r\n                this.obj = JSON.parse(e.data);//获取服务器发来的数据,并且转换为对象\r\n                this.msgArr.push(this.obj); //将单条记录的对象push进数组\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n.mui-title{\r\n    color: #fff;\r\n}\r\n.app-chatroom .mui-bar-transparent{\r\n    background:rgba(0,0,0,0.5);\r\n}\r\n.app-chatroom .chat-body{\r\n    overflow: scroll;\r\n    height:38rem;\r\n    padding-top:4rem;\r\n    padding-left:1rem;\r\n    padding-right:1rem;\r\n}\r\n.app-chatroom .chat-body .chat-box{\r\n    padding-top:1rem;\r\n    margin-bottom: 1rem;\r\n}\r\n.app-chatroom .chat-body .chat-box::after{\r\n    content: \" \";\r\n    display: block;\r\n    line-height: 0;\r\n    height: 0;\r\n    visibility: hidden;\r\n}\r\n.app-chatroom .chat-user{\r\n    padding:0;\r\n    margin: 0;\r\n    display: flex;\r\n    vertical-align: top;\r\n    position: relative;\r\n}\r\n.app-chatroom .chat-user .user-img-box{\r\n    width: 2.5rem;\r\n    height: 2.5rem;\r\n    position: absolute;\r\n}\r\n.app-chatroom .chat-user li.user-name{\r\n    position: absolute;\r\n}\r\n.app-chatroom .chat-user li.user-img-box.right{\r\n    right: 0rem;\r\n}\r\n.app-chatroom .chat-user li.user-name.right{\r\n    right: .5rem;\r\n    top:-1.4rem;\r\n}\r\n.app-chatroom .chat-user li.user-img-box.left{\r\n    left: 0rem;\r\n}\r\n.app-chatroom .chat-user li.user-name.left{\r\n    left: .5rem;\r\n    top:-1.4rem;\r\n}\r\n.app-chatroom .chat-user .user-img-box .user-img{\r\n    width:100%;\r\n    height: 100%;\r\n    border-radius: .5rem;\r\n}\r\n.app-chatroom .chat-user .user-name h4{\r\n    color: #999;\r\n    font-size:16px;\r\n}\r\n.app-chatroom .chat-body .chat-content{\r\n    color: #000;\r\n    padding: 0rem 3rem;\r\n}\r\n.app-chatroom .chat-body .chat-content .content-msg{\r\n    padding:.7rem;\r\n    background: #fff;\r\n    border-radius: .2rem;\r\n}\r\n.app-chatroom .send-box{\r\n    width: 100%;\r\n    background-color: transparent;\r\n    position: fixed;\r\n    bottom: 0;\r\n}\r\n.app-chatroom .send-box .send-parent{\r\n    margin: .5rem 0;\r\n    padding:0rem 1rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n.app-chatroom .send-box .send-parent .input-box{\r\n    width:75%;\r\n}\r\n.app-chatroom .send-box .send-parent .send-input{\r\n    width:100%;\r\n    height: 2.2rem;\r\n    margin: 0;\r\n    padding: .3rem;\r\n    color: #000;\r\n    background-color: #fff;\r\n}\r\n.app-chatroom .send-box .send-parent .btn-box{\r\n    width: 20%;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n}\r\n.app-chatroom .send-box .send-parent .send-btn{\r\n    line-height: 2.2rem;\r\n    padding: .5rem 1rem;\r\n    background-color: #007bff;\r\n    font-size: 18px;\r\n    color:#fff;\r\n}\r\n.app-chatroom .send-box .send-parent .send-btn:hover{\r\n    background-color: #009bff;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}